package TH1;

import java.util.Arrays;

public class Task1_2 {
	
	private int[] arrayNum;
	public Task1_2(int[] arrayNum) {
		super();
		this.arrayNum = arrayNum;
	}

	// Input: 10 11 12 13 14 16 17 19 20
	// Output: 15 18
	
	public int[] getMissingValues() {
		int indexResult = 0;
		int[] result = new int[arrayNum[arrayNum.length - 1] - arrayNum[0] - arrayNum.length + 1];
		int i = arrayNum[0];
		for (int j = 0; j < arrayNum.length; j++) {
			if (arrayNum[j] != i) {
				result[indexResult] = i;
				indexResult++;
				j++;
			}
			i++;
		}
		return result;
	}

	// Input: 10 11 12 -1 14 10 17 19 20
	// Output(k=3): 10 11 12 12 14 16 17 19 20
	public int[] fillMissingValues(int k) {
		for (int i = 0; i < arrayNum.length; i++) {
			if (arrayNum[i] == -1) {
				int left = i - k / 2;
				int right = i + k / 2;
				if (k % 2 == 0) {
					if (left < 0) {
						left = 0;
						right = k;
					}
					if (right > arrayNum.length - 1) {
						left = arrayNum.length - k - 1;
						right = arrayNum.length - 1;
					}
					arrayNum[i] = (int) average(left, right, k);
				} else {
					int subLeft = left - 1;
					int incRight = right + 1;
					if (subLeft < 0) {
						subLeft = 0;
						right = k;
					}
					if (incRight > arrayNum.length - 1) {
						left = arrayNum.length - k - 1;
						incRight = arrayNum.length - 1;
					}
					if (i == 0) {
						arrayNum[i] = (int) average(1, right, k);
					} else if (i == arrayNum.length - 1) {
						arrayNum[i] = (int) average(arrayNum.length - 1 - k, arrayNum.length - 1, k);
					} else {
						arrayNum[i] = (int) Math.min(average(subLeft, right, k), average(left, incRight, k));
					}
				}
			}
		}
		return arrayNum;
	}

	public float average(int start, int end, int k) {
		int sum = 0;
		for (int j = start; j <= end; j++) {
			sum += arrayNum[j];
		}
		return (float) (sum + 1) / k;
	}

//	

	public static void main(String[] args) {
		int[] arrayNum = { 10, 11, 12, 13, 14, 16, 17, 19, 20 };
		Task1_2 MyArray = new Task1_2(arrayNum);
		
		int[] numMissingValues = MyArray.getMissingValues();
		System.out.println(Arrays.toString(numMissingValues));

		int[] nums = { 10, 11, 12, -1, 14, 10, 17, 19, 20 };
		Task1_2 MyArray2 = new Task1_2(nums);
		int [] filledMissingValues = MyArray2.fillMissingValues(4);
		System.out.println(Arrays.toString(filledMissingValues));		

	}
}
